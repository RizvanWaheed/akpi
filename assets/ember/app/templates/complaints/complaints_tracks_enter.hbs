<div class="row">
	<div class="col-md-6">
		<form role="form" id="formComplaints" method="POST" enctype="multipart/form-data" {{action "save" on="submit"}}>
			<div class="box" style="border-top: 0px;">
				<div class="box-body">
					{{!--  {{input type="hidden" id="idComplaint" value=complaint.id }} --}}
					<div class="form-group form-group-sm col-xs-4 ">
						<label for="id">Complaint No.<small>(Reg.)</small></label>
						<div class="input-group">
							{{input class="form-control input-sm" label="id" id="idComplaint" placeholder="Complaint No"  key-up="searchKeyUp" focus-out="searchFocusOut" value=complaint.id  disabled=editMode }}
							<span class="input-group-btn">
								<button class="btn btn-abacus btn-flat btn-sm" type="button"
									{{action "findNumber" this}} {{bind-attr disabled=editMode}}> <i
										class="fa fa-search"></i></button>
							</span>
						</div>
					</div>
					<div class="form-group form-group-sm col-xs-4 ">
						<label for="phoneNumber">Calling No.<small>92xxxxxxxxxx</small>{{!-- /Ticket ID --}}</label>
						<div class="input-group">
							{{input class="form-control  input-sm" label="MSISDN" id="msisdnComplaint" placeholder="Calling No" value=complaint.msisdn  }}
							<span class="input-group-btn">
								<button class="btn btn-abacus btn-flat btn-sm" type="button"
									{{action "findMsisdn" this}} {{bind-attr disabled=editMode}}> <i
										class="fa fa-search"></i></button>
							</span>
						</div>
					</div>
					<div class="form-group form-group-sm col-xs-4 ">
						<label for="phoneNumber">Ticket ID</label>
						<div class="input-group">
							{{input class="form-control  input-sm" label="Contact Mobile" id="ticketIdComplaint" placeholder="Enter Ticket ID" value=complaint.ticket_id disabled=editMode}}
							<span class="input-group-btn">
								<button class="btn btn-abacus btn-flat btn-sm" type="button"
									{{action "findTicket" this}} {{bind-attr disabled=editMode}}> <i
										class="fa fa-search"></i></button>
							</span>
						</div>

					</div>
					<div class="form-group form-group-sm col-xs-4 ">
						<label for="address">Booking ID</label>
						<div class="input-group">
							{{input class="form-control  input-sm" id="bookingIdComplaint" placeholder="Enter Booking ID" value=complaint.booking_id disabled=editMode}}
							<span class="input-group-btn">
								<button class="btn btn-abacus btn-flat btn-sm" type="button"
									{{action "findBooking" this}} {{bind-attr disabled=editMode}}> <i
										class="fa fa-search"></i></button>
							</span>
						</div>
					</div>
					<div class="form-group form-group-sm col-xs-8 ">
						<label for="address">Customer Email</label>
						<div class="input-group">
							{{input class="form-control  input-sm" id="emailComplaint" placeholder="Enter Complainer Email" value=caller.email disabled=editMode}}
							<span class="input-group-btn">
								<button class="btn btn-abacus btn-flat btn-sm" type="button" {{action "findEmail" this}}
									{{bind-attr disabled=editMode}}> <i class="fa fa-search"></i></button>
							</span>
						</div>
					</div>
					<div class="form-group form-group-sm col-xs-6 ">
						<label for="phoneNumber">Customer Name</label>
						{{input class="form-control  input-sm" label="Complainer Name" id="nameComplaint" placeholder="Enter Complainer Name" value=caller.name disabled=editMode }}
					</div>
					<div class="form-group form-group-sm col-xs-6 ">
						<label for="phoneNumber">Contact Mobile #</label>
						{{input class="form-control  input-sm" label="Contact Mobile" id="mobileComplaint" placeholder="Enter Contact Mobile" value=caller.mobile disabled=editMode}}
					</div>
					<div class="form-group form-group-sm col-xs-4 ">
						<label for="cities">City</label>
						{{view "select" class="form-control input-sm" contentBinding="cities" id="cityComplaint" optionValuePath="content.id" optionLabelPath="content.name" prompt="Select Complaint City..." valueBinding="complaint.domain_id" disabled=editMode}}
					</div>
					<div class="form-group form-group-sm col-xs-4 ">
						<label for="products">Department </label>
						{{view "select" class="form-control  input-sm" contentBinding="departments" id="department_id" optionValuePath="content.id" optionLabelPath="content.name" valueBinding="complaint.department_id" prompt="Select Complaint Department..." disabled=editMode}}
					</div>
					<div class="form-group form-group-sm col-xs-4 ">
						<label for="models">Sub Departments</label>
						{{view "select" class="form-control  input-sm" contentBinding="subDepartments" id="sub_department_id" optionValuePath="content.id" optionLabelPath="content.name" prompt="Select Complaint Sub-Department..." valueBinding="complaint.sub_department_id" disabled=editMode}}
					</div>
					<div class="form-group form-group-sm col-xs-6 ">
						<label for="Monitoring">Type</label>
						{{view "select" class="form-control input-sm"  content=monitoredBy  id="monitoring_for_id" optionValuePath="content.id" optionLabelPath="content.name" valueBinding="complaint.monitoring_for_id"  prompt="Select Type to ..." disabled=editMode}}
					</div>
					<div class="form-group form-group-sm col-xs-6 ">
						<label for="problems">Sub Reason</label>
						{{view "select" class="select2 form-control input-sm" contentBinding="sub_reasons" id="sub_reason_id" optionValuePath="content.id" optionLabelPath="content.name" prompt="Select a reason..." valueBinding="complaint.sub_reason_id" disabled=editMode}}
					</div>
					<div class="form-group form-group-sm col-xs-6 ">
						<label for="probls">Reason</label>
						{{view "select" class="form-control input-sm" contentBinding="reasons" id="reason_id" optionValuePath="content.id" optionLabelPath="content.name" prompt="Select a reason..." valueBinding="complaint.reason_id" disabled=editMode2}}
					</div>
					<div class="form-group form-group-sm col-xs-6 ">
						<label for="problems">Sub Category</label>
						{{view "select" class="form-control input-sm" contentBinding="sub_categories" id="sub_category_id" optionValuePath="content.id" optionLabelPath="content.name" prompt="Select a reason..." valueBinding="complaint.sub_category_id" disabled=editMode2}}
					</div>
					<div class="form-group form-group-sm col-xs-6 ">
						<label for="problems">Category</label>
						{{view "select" class="form-control input-sm" contentBinding="categories" id="category_id" optionValuePath="content.id" optionLabelPath="content.name" prompt="Select a category..." valueBinding="complaint.category_id" disabled=editMode2}}
					</div>
					<div class="form-group form-group-sm col-xs-6 ">
						<label for="attachment">Attachment</label>
						{{input type='file' class="form-control filestyle" data-buttonName="btn-abacus" data-buttonText="Upload" data-icon="true" data-placeholder="File" data-iconName="fa fa-paperclip" data-buttonBefore="true"  name="abacusFile" id="abacusFile" value=abacusFile  multiple="multiple" }}
					</div>
					{{#if editMode}}
					<div class="form-group form-group-sm col-xs-6 ">
						<label for="status">Status</label>
						{{view "select" id="stateComplaintLog" class="form-control " content=complaintStates  optionValuePath="content.id" optionLabelPath="content.name" valueBinding="complaintLog.state_id"}}
					</div>
					<div class="form-group form-group-sm col-xs-12 " id="commentArea">
						<label for="description">Comment</label>
						{{textarea class="form-control " id="commComplaint" placeholder="Enter comment" value=complaintLog.remarks}}
					</div>
					{{else}}
					<div class="form-group form-group-sm col-xs-12 ">
						<label for="description">Remarks</label>
						{{textarea class="form-control " id="remarksComplaint" placeholder="Enter Remarks" value=complaint.remarks style="hight:40px !important;" disabled=editMode }}
					</div>
					{{/if}}
				</div>
				<div class="box-footer pull-right">
					<button type="submit" id="btnComplainEditSave" class="btn btn-abacus btn-flat btn-sm"><i
							class="fa fa-save"></i> Save </button>
					<button type="reset" id="btnComplainEditReset" class="btn btn-abacus btn-flat btn-sm"
						{{action "reset" this  }}> <i class="fa fa-undo"></i> Reset </button>
				</div>
			</div>
		</form>
	</div>
	<div class="col-md-6">
		<div class="box" style="border-top: 0px;">
			<div class="box-header">
				<div class="row">
					<div class="form-group-sm  col-sm-12 col-xs-12">
						<span class="btn btn-flat btn-app">New <br> Complaints <span
								class="badge bg-purple">{{mgmtNewComplaint}}</span></span>
						<span class="btn btn-flat btn-app">Pending <br> Complaints <span
								class="badge badge bg-teal">{{mgmtPendingComplaint}}</span></span>
						<span class="btn btn-flat btn-app">Hold <br> Complaints <span
								class="badge bg-maroon">{{mgmtHoldComplaint}}</span></span>
						{{!--   <span class="pull-right-container">
						<small class="label pull-right bg-green">New </small>
					</span>
					<span class="pull-right-container">
						<small class="label pull-right bg-green">Pending </small>
					</span>
					<span class="pull-right-container">
						<small class="label pull-right bg-green">Hold </small>
					</span> --}}
					</div>
				</div>
				<i class="fa fa-comments-o"></i>
				<h3 class="box-title">Comment</h3>

			</div>
			<div class="box-body chat" id="chat-box">
				<!-- chat item -->
				{{#each com in complaintLogs}}
				<p class="message">
					<a href="javascript:;" class="name">
						<small class="text-muted pull-right"><i class="fa fa-clock-o"></i>{{com.date}}</small>
						{{com.user_id.name}}
					</a>
				<div>
					<dl>
						<dt>{{com.state}}</dt>
						<dd>{{com.remarks}}.</dd>
						{{#if com.photo}}
						<dd><img {{bind-attr src=com.photo }} alt="No Image" width="250px"></dd>
						{{/if}}
					</dl>
				</div>
				</p>
				<hr>
				{{else}}
				<p> No Record Found </p>
				{{/each}}
				<!-- chat item -->
			</div><!-- /.chat -->
			<div class="box-footer">
			</div>
		</div>
	</div><!-- /.col -->
</div>
<div class="row">
	<div class="col-md-12">
		<div class="box">
			<div class="box-header">
				<h3 class="box-title">Seached Complaints <small>List </small> </h3>
			</div><!-- /.box-header -->
			<div class="box-body" style="height:400px">
				<div class="table-responsive no-padding">
					{{!-- {{view "data-table" linkBinding="link" columnsBinding="columns" valueBinding="data" }} --}}
					<table class="table table-bordered table-striped">
						<thead>
							<tr>
								<th>Complaint ID</th>
								<th>MSISDN</th>
								<th>Complaint Date</th>
								{{!--  <th >Product</th> --}}
								<th>Complainer</th>
								<th>Contact #</th>
								<th>Complainer Email</th>
								<th>Actions</th>
							</tr>
						</thead>
						<tbody>
							{{#each com in paginatedContent}}
							<tr>
								<td>{{com.id}}</td>
								<td>{{com.msisdn}}</td>
								<td>{{com.created}}</td>
								{{!-- 	<td>{{com.product_id.name}}</td> --}}
								<td>{{com.caller_id.name}}</td>
								<td>{{com.caller_id.mobile}}</td>
								<td>{{com.caller_id.email}}</td>
								<td>
									{{#if com.status}}
									<button class="btn btn-warning btn-flat btn-xs" {{action "edit" com  }}> <i
											class="fa  fa-edit"></i> Edit </button>
									{{else}}
									<button class="btn btn-warning btn-flat btn-xs" {{action "view" com  }}> <i
											class="fa  fa-newspaper-o"></i> Closed </button>
									{{/if}}
								</td>
							</tr>
							{{else}}
							<tr>
								<td colspan="8"> No record found... </td>
							</tr>
							{{/each}}
						</tbody>
					</table>
				</div>
			</div><!-- /.box-body -->
			{{partial 'paging'}}
		</div><!-- /.box -->
	</div><!-- /.col -->
</div>
